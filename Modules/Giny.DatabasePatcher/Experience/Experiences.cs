using Giny.Core;
using Giny.Core.DesignPattern;
using Giny.ORM;
using Giny.World.Records.Characters;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Giny.DatabasePatcher.Experience
{
    public class Experiences
    {
        private static Dictionary<long, long> GuildExperiences = new Dictionary<long, long>()
        {
            { 1,0 },
            {2, 1100 },
            {3, 6500 },
            {4, 15000 },
            {5, 28000 },
            {6, 48000 },
            {7, 73000 },
            {8, 105000 },
            {9, 145000 },
            {10, 192000 },
            {11,252000 },
            {12,326000 },
            {13,410000 },
            {14,505000 },
            {15,610000 },
            {16,750000 },
            {17,910000 },
            {18,1150000 },
            {19,1420000 },
            {20,1710000 },
            {21,2020000 },
            {22,2350000 },
            {23,2700000 },
            {24,3100000 },
            {25,3530000 },
            {26,3985000 },
            {27,4480000 },
            {28,5030000 },
            {29,5610000},
            {30,6216000},
            {31,6870000},
            {32,7550000},
            {33,8290000},
            {34,9100000},
            {35,10000000},
            {36,11000000},
            {37,12400000},
            {38,14000000},
            {39,15800000},
            {40,17800000},
            {41,20000000},
            {42,22500000},
            {43,25300000},
            {44,28500000},
            {45,32000000},
            {46,35700000},
            {47,39600000},
            {48,44000000},
            {49,48600000},
            {50,53500000},
            {51,58600000},
            {52,63900000},
            {53,69500000},
            {54,75300000},
            {55,81300000},
            {56,87651000},
            {57,94200000},
            {58,101500000},
            {59,108940000},
            {60,116500000},
            {61,124500000},
            {62,132800000},
            {63,141300000},
            {64,151700000},
            {65,162510000},
            {66,173770000},
            {67,185530000},
            {68,197780000},
            {69,210550000},
            {70,223850000},
            {71,235290000},
            {72,252090000},
            {73,267070000},
            {74,282640000},
            {75,298820000},
            {76,315630000},
            {77,333070000},
            {78,351180000},
            {79,369970000},
            {80,389450000},
            {81,409650000},
            {82,430590000},
            {83,452290000},
            {84,474760000},
            {85,498030000},
            {86,522110000},
            {87,547040000},
            {88,572840000},
            {89,599520000},
            {90,627120000},
            {91,655650000},
            {92,685140000},
            {93,715610000},
            {94,747100000},
            {95,779630000},
            {96,813230000},
            {97,847920000},
            {98,883740000},
            {99,920710000},
            {100,958860000},
            {101,998230000},
            {102,1038850000},
            {103,1080750000},
            {104,1123960000},
            {105,1168530000},
            {106,1214470000},
            {107,1261840000},
            {108,1310660000},
            {109,1360980000},
            {110,1412830000},
            {111,1466260000},
            {112,1521300000},
            {113,1578000000},
            {114,1636400000},
            {115,1696550000},
            {116,1758480000},
            {117,1822250000},
            {118,1887910000},
            {119,1955500000},
            {120,2025070000},
            {121,2096670000},
            {122,2170037000},
            {123,2246200000},
            {124,2324240000},
            {125,2404520000},
            {126,2487120000},
            {127,2572090000},
            {128,2659490000},
            {129,2749390000},
            {130,2841860000},
            {131,2936940000},
            {132,3034730000},
            {133,3135270000},
            {134,3236660000},
            {135,3344950000},
            {136,3454230000},
            {137,3566570000},
            {138,3682060000},
            {139,3800760000},
            {140,3922780000},
            {141,4048180000},
            {142,4177060000},
            {143,4309520000},
            {144,4445640000},
            {145,4585510000},
            {146,4729240000},
            {147,4876930000},
            {148,5028670000},
            {149,5184580000},
            {150,5344760000},
            {151,5510000000},
            {152,5678390000},
            {153,5852060000},
            {154,6030470000},
            {155,6213740000},
            {156,6401990000},
            {157,6595360000},
            {158,6793980000},
            {159,6997980000},
            {160,7207510000},
            {161,7422720000},
            {162,7643740000},
            {163,7870740000},
            {164,8103870000},
            {165,8343290000},
            {166,8589170000},
            {167,8841670000},
            {168,9100980000},
            {169,9367270000},
            {170,9640730000},
            {171,9921540000},
            {172,10209910000},
            {173,10506030000},
            {174,10810100000},
            {175,11122350000},
            {176,11442980000},
            {177,11772220000},
            {178,12110300000},
            {179,12457450000},
            {180,12813930000},
            {181,13179970000},
            {182,13555840000},
            {183,14041790000},
            {184,14338110000},
            {185,14745060000},
            {186,15162940000},
            {187,15592050000},
            {188,16032670000},
            {189,16485130000},
            {190,16949750000},
            {191,17426860000},
            {192,17916460000},
            {193,18419900000},
            {194,18936550000},
            {195,19467100000},
            {196,20011940000},
            {197,20571460000},
            {198,21146060000},
            {199,21736160000},
            {200,22356230000},
        };
        private static Dictionary<long, int> JobExperiences = new Dictionary<long, int>()
        {
            {1,0},
            {2,20},
            {3,60},
            {4,120},
            {5, 200},
            {6, 300},
            {7, 420},
            {8, 560},
            {9, 720},
            {10, 900},
            {11, 1100},
            {12, 1320},
            {13, 1560},
            {14, 1820},
            {15, 2100},
            {16, 2400},
            {17, 2720},
            {18, 3060},
            {19, 3420},
            {20, 3800},
            {21, 4200},
            {22, 4620},
            {23, 5060},
            {24, 5520},
            {25, 6000},
            {26, 6500},
            {27, 7020},
            {28, 7560},
            {29, 8120},
            {30, 8700},
            {31, 9300},
            {32, 9920},
            {33, 10560},
            {34, 11220},
            {35, 11900},
            {36, 12600},
            {37, 13320},
            {38, 14060},
            {39, 14820},
            {40, 15600},
            {41, 16400},
            {42, 17220},
            {43, 18060},
            {44, 18920},
            {45, 19800},
            {46, 20700},
            {47, 21620},
            {48, 22560},
            {49, 23520},
            {50, 24500},
            {51, 25500},
            {52, 26520},
            {53, 27560},
            {54, 28620},
            {55, 29700},
            {56, 30800},
            {57, 31920},
            {58, 33060},
            {59, 34220},
            {60, 35400},
            {61, 36600},
            {62, 37820},
            {63, 39060},
            {64, 40320},
            {65, 41600},
            {66, 42900},
            {67, 44220},
            {68, 45560},
            {69, 46920},
            {70, 48300},
            {71, 49700},
            {72, 51120},
            {73, 52560},
            {74, 54020},
            {75, 55500},
            {76, 57000},
            {77, 58520},
            {78, 60060},
            {79, 61620},
            {80, 63200},
            {81, 64800},
            {82, 66420},
            {83, 68060},
            {84, 69720},
            {85, 71400},
            {86, 73100},
            {87, 74820},
            {88, 76560},
            {89, 78320},
            {90, 80100},
            {91, 81900},
            {92, 83720},
            {93, 85560},
            {94, 87420},
            {95, 89300},
            {96, 91200},
            {97, 93120},
            {98, 95060},
            {99, 97020},
            {100, 99000},
            {101, 101000},
            {102, 103020},
            {103, 105060},
            {104, 107120},
            {105, 109200},
            {106, 111300},
            {107, 113420},
            {108, 115560},
            {109, 117720},
            {110, 119900},
            {111, 122100},
            {112, 124320},
            {113, 126560},
            {114, 128820},
            {115, 131100},
            {116, 133400},
            {117, 135720},
            {118, 138060},
            {119, 140420},
            {120, 142800},
            {121, 145200},
            {122, 147620},
            {123, 150060},
            {124, 152520},
            {125, 155000},
            {126, 157500},
            {127, 160020},
            {128, 162560},
            {129, 165120},
            {130, 167700},
            {131, 170300},
            {132, 172920},
            {133, 175560},
            {134, 178220},
            {135, 180900},
            {136, 183600},
            {137, 186320},
            {138, 189060},
            {139, 191820},
            {140, 194600},
            {141, 197400},
            {142, 200220},
            {143, 203060},
            {144, 205920},
            {145, 208800},
            {146, 211700},
            {147, 214620},
            {148, 217560},
            {149, 220520},
            {150, 223500},
            {151, 226500},
            {152, 229520},
            {153, 232560},
            {154, 235620},
            {155, 238700},
            {156, 241800},
            {157, 244920},
            {158, 248060},
            {159, 251220},
            {160, 254400},
            {161, 257600},
            {162, 260820},
            {163, 264060},
            {164, 267320},
            {165, 270600},
            {166, 273900},
            {167, 277220},
            {168, 280560},
            {169, 283920},
            {170, 287300},
            {171, 290700},
            {172, 294120},
            {173, 297560},
            {174, 301020},
            {175, 304500},
            {176, 308000},
            {177, 311520},
            {178, 315060},
            {179, 318620},
            {180, 322200},
            {181, 325800},
            {182, 329420},
            {183, 333060},
            {184, 336720},
            {185, 340400},
            {186, 344100},
            {187, 347820},
            {188, 351560},
            {189, 355320},
            {190, 359100},
            {191, 362900},
            {192, 366720},
            {193, 370560},
            {194, 374420},
            {195, 378300},
            {196, 382200},
            {197, 386120},
            {198, 390060},
            {199, 394020},
            {200, 398000},
        };


        public static void Patch()
        {
            Logger.Write("Building job experience table ...");

            foreach (var record in ExperienceRecord.GetExperiences())
            {
                if (JobExperiences.ContainsKey(record.Level))
                {
                    record.ExperienceJob = JobExperiences[record.Level];
                }

                if (GuildExperiences.ContainsKey(record.Level))
                {
                    record.ExperienceGuild = GuildExperiences[record.Level];
                }
                record.UpdateInstantElement();
            }
        }
    }
}
